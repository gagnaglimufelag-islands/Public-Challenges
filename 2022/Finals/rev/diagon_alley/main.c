#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

// gg{sp0il3r_sn4p3_k1ll5_dumbl3d0r3}

int main(int argc, char *argv[]) {
  if (argc != 2) {
    printf("Key is missing...\n");
    return 1;
  }

  if (strlen(argv[1]) != 34) {
    printf("Key length is not 34...\n");
    return 1;
  }

  char arr[34][35] = {
      {'g', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', 'g', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '{', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', 's', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'p', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', '0', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'i', 'i', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'l', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', '3', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 'r', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', 's', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'n', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', '4', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'p', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', '3', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'k', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', '1', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'l', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'l', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', '5', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'd', 'o', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'u', 'n', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'm', 'd', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'b', 'i', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'l', '8', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '3', 'v', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'd', 'O', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'b', '0', 't', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'b', 'O', 'r', 'e', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'b', 'O', 't', '3', '\n'},
      {'5', '5', '[', '5', 'q', 'O', 'l', 'I', 'B', 't', '_', '5', 'm', 'a', 'q', 'B', '_', 'c', 'i', 'i', 'i', 's', '_', 'b', 'o', 'n', 'd', 'i', '8', 'b', 'O', 't', 'e', '}'},
  };

  printf("Alohomora");
  for (int i = 0; i < 10; ++i) {
    printf(".");
    fflush(stdout);
    usleep(250 * 1000);
  }

  bool correct = true;

  for (int i = 0; i < 34; ++i) {
    if (arr[i][i] == argv[1][i]) {
      usleep(75 * 1000);
    } else {
      usleep(550 * 1000);
      correct = false;
    }
  }

  if (correct) {
    printf("\nDang it, you found the flag.. %s\n", argv[1]);
    printf("Obliviate!\n");
    system("clear");
  } else {
    printf("\nConfundo!\n");
  }
}
